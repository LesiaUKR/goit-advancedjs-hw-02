{"version":3,"file":"commonHelpers3.js","sources":["../src/js/03-promises.js"],"sourcesContent":["import iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\n\nconst submitBtn = document.querySelector('button[type=submit]');\nconst form = document.querySelector('form');\n\nconst delay = document.querySelector('input[name=delay]');\nconst step = document.querySelector('input[name=step]');\nconst promisesQuantity = document.querySelector('input[name=amount]');\n\nfunction createPromise(position, delay) {\n  const promise = new Promise((resolve, reject) => {\n    setTimeout(() => {\n      const shouldResolve = Math.random() > 0.3;\n      if (shouldResolve) {\n        resolve({ position, delay });\n      } else {\n        reject({ position, delay });\n      }\n    }, delay);\n  });\n  return promise;\n}\n\nsubmitBtn.addEventListener('click', onClick);\n\nfunction onClick(event) {\n  event.preventDefault();\n  submitBtn.disabled = true;\n\n  let firstDelay = Number(delay.value);\n  let delayStep = Number(step.value);\n\n  const promiseArray = [];\n\n  for (let i = 0; i < +promisesQuantity.value; i++) {\n    const promise = createPromise(1 + i, firstDelay + i * delayStep)\n      .then(({ position, delay }) => {\n        console.log(`Promise ${position} fulfilled in ${delay}ms`);\n        iziToast.success({\n          message: `✅ Fulfilled promise ${position} in ${delay}ms`,\n          messageColor: '#f44566',\n          messageSize: '18px',\n          backgroundColor: '#ffffff',\n          position: 'topRight',\n          timeout: 2000,\n          transitionIn: 'fadeInDown',\n          transitionOut: 'fadeOutUp',\n        });\n      })\n      .catch(({ position, delay }) => {\n        console.log(`Promise ${position} rejected in ${delay}ms`);\n        iziToast.error({\n          message: `❌ Rejected promise ${position} in ${delay}ms`,\n          messageColor: '#f44566',\n          messageSize: '18px',\n          backgroundColor: '#ffffff',\n          position: 'topRight',\n          timeout: 2000,\n          transitionIn: 'bounceInDown',\n          transitionOut: 'fadeOutUp',\n        });\n      });\n    promiseArray.push(promise);\n  }\n  Promise.all(promiseArray).finally(() => {\n    submitBtn.disabled = false;\n  });\n\n  form.reset();\n}\n"],"names":["submitBtn","form","delay","step","promisesQuantity","createPromise","position","resolve","reject","onClick","event","firstDelay","delayStep","promiseArray","i","promise","iziToast"],"mappings":"wIAGA,MAAMA,EAAY,SAAS,cAAc,qBAAqB,EACxDC,EAAO,SAAS,cAAc,MAAM,EAEpCC,EAAQ,SAAS,cAAc,mBAAmB,EAClDC,EAAO,SAAS,cAAc,kBAAkB,EAChDC,EAAmB,SAAS,cAAc,oBAAoB,EAEpE,SAASC,EAAcC,EAAUJ,EAAO,CAWtC,OAVgB,IAAI,QAAQ,CAACK,EAASC,IAAW,CAC/C,WAAW,IAAM,CACO,KAAK,OAAM,EAAK,GAEpCD,EAAQ,CAAE,SAAAD,EAAU,MAAAJ,CAAK,CAAE,EAE3BM,EAAO,CAAE,SAAAF,EAAU,MAAAJ,CAAK,CAAE,CAE7B,EAAEA,CAAK,CACZ,CAAG,CAEH,CAEAF,EAAU,iBAAiB,QAASS,CAAO,EAE3C,SAASA,EAAQC,EAAO,CACtBA,EAAM,eAAc,EACpBV,EAAU,SAAW,GAErB,IAAIW,EAAa,OAAOT,EAAM,KAAK,EAC/BU,EAAY,OAAOT,EAAK,KAAK,EAEjC,MAAMU,EAAe,CAAA,EAErB,QAASC,EAAI,EAAGA,EAAI,CAACV,EAAiB,MAAOU,IAAK,CAChD,MAAMC,EAAUV,EAAc,EAAIS,EAAGH,EAAaG,EAAIF,CAAS,EAC5D,KAAK,CAAC,CAAE,SAAAN,EAAU,MAAAJ,KAAY,CAC7B,QAAQ,IAAI,WAAWI,kBAAyBJ,KAAS,EACzDc,EAAS,QAAQ,CACf,QAAS,uBAAuBV,QAAeJ,MAC/C,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,QAAS,IACT,aAAc,aACd,cAAe,WACzB,CAAS,CACT,CAAO,EACA,MAAM,CAAC,CAAE,SAAAI,EAAU,MAAAJ,KAAY,CAC9B,QAAQ,IAAI,WAAWI,iBAAwBJ,KAAS,EACxDc,EAAS,MAAM,CACb,QAAS,sBAAsBV,QAAeJ,MAC9C,aAAc,UACd,YAAa,OACb,gBAAiB,UACjB,SAAU,WACV,QAAS,IACT,aAAc,eACd,cAAe,WACzB,CAAS,CACT,CAAO,EACHW,EAAa,KAAKE,CAAO,CAC1B,CACD,QAAQ,IAAIF,CAAY,EAAE,QAAQ,IAAM,CACtCb,EAAU,SAAW,EACzB,CAAG,EAEDC,EAAK,MAAK,CACZ"}